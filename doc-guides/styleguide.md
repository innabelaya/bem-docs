Данное руководство описывает общие правила оформления документации, выкладываемой на сайты [bem.info](https://ru.bem.info) и [lego](https://lego.yandex-team.ru/).
 [bla](#to)

**Цели:**
* Унифицикация оформления документации на сайтах, в том числе описания блоков, постов в блог, статей и описания технологий.
* Корректное отображение информации при выкладке документа.

## Оглавление

## Название документа

* Всегда оформляется заголовком первого уровня для отображения названия статьи на GitHub. На bem.info/lego данный заголовок не отображается.
* Название статьи для bem.info/lego прописывается в модели сайта.
* Названия статьи на GitHub и bem.info/lego должны совпадать.
* Подчиняются всем общим правилам [оформления заголовков](#headers).

Пример
```
# Название документа
```

## Оформление заголовков и названия документа

* Заголовки начинаются с прописной буквы. Исключение составляют случаи, когда заголовок начинается с термина, который пишется со строчной буквы. Например, «borschik и технологии». Подробная информация в разделе [Оформление терминов](#terms).
* Точки в конце заголовков не ставятся. Использовать точку нужно только между предложениями внутри заголовка. 
* Сокращения слов в заголовках не допускаются.
* Двоеточие не ставится. Даже если заголовок открывает список.
* Вопросительные знаки ставятся, только если это это цитата вопроса пользователя. Если это стандартная описательная статья, знак вопроса опускается.
* Иерархия заголовков начинается со второго уровня. Первый уровень зарезервирован под название документа. На первый уровень заголовков на сайте bem.info/lego невозможно создать якорную ссылку.

```
## Заголовок 2 уровня
### Заголовок 3 уровня
```

## Оформление ссылок

### Общие принципы

При оформлении ссылок необходимо помнить о следующих важных принципах:

<a name="to"></a>
* **Целостность текста.**<br>
  Ссылки должны ставиться так, чтобы читатель от их отсутствия ничего не потерял. Если текст в отрыве от браузера (в распечатке, например) непонятен, то гипертекст плох. Ни в коем случае нельзя делать ссылки со слов «тут», «здесь» и т. п.
* **Ценность ссылок.**<br>
  Ссылка в тексте должна быть максимально полезной. Ставить ее стоит только в том случае, если она ведет на ресурс, тема которого затронута в тексте, но не раскрыта.
* **Удобство чтения.**<br>
  Если каждое второе слово подчеркнуто, читатель перестает воспринимать текст. Законы восприятия и удержания внимания в интернете никто не отменял. Поэтому употребление ссылок в тексте должно быть оправдано.
* **Удобство чтения.**<br>
  Полезно выносить ссылки на сопутствующие документы в конец материала. Читатель уже изучил содержание, и ему надо куда-то двигаться дальше. Так вы даете ему план дальнейших действий.
* **Полнота информации.**<br>
  Перекрестные ссылки между свежими и архивными материалами, во-первых, помогут читателю получить информацию, во-вторых, значительно повысят ценность архива.
* **Удобство навигации.**<br>
  Перекрестные ссылки в документе помогают читателю быстро перейти к нужной информации в большом документе. Но не следует забывать, что при переходе по якорной ссылке у читателя должно остаться понимание, в какой части документа он находится, чтобы иметь возможность вернуться к последловательному изучению.

### Типы ссылок и их применение

На сайтах [lego](http://lego.yandex-team.ru) и [bem-info](http://bem.info) разработан механизм [переопределения ссылок](#links-redirection) в md-файлах.

>**Важно!** ссылки должны работать как на GitHub, так и на сайтах.

* Сайты lego и bem.info используют протокол `https`.
* Необходимо указывать локализацию сайта bem.info (ru.bem.info и en.bem.info).
* Предоставляя читателю дополнительную инфрмацию, необходимо ссылаться на bem.info/lego, а не на Github, где это возможно.
* В абсолютных ссылках на bem.info/lego на документы, которые зависят от версий библиотек или инструментов, указание конкретной версии необходимо заменить на `current`.<br>
  ```
  Блок [button](http://ru.bem.info/libs/bem-components/current/desktop/button/)
  ```
* Ссылаясь на Github, необходимо убедиться, что ссылка ведет на актуальную ветку репозитория.
* Ссылаясь на разные документы в пределах одной версии библиотеки, необходимо использовать **относительные ссылки**.

Важно! Для того, чтобы видео не становились видео, а оставалось ссылкой на него, нужно делать ссылки не в маркдауне, а в html - https://github.com/bem/bem-method/commit/fbff1b01a8b447edf222e124d079e9681bdb75f4

### Внешний вид ссылок

Дополнительное форматирование к ссылкам не применяется:

* Если необходимо сделать ссылкой слово, которое в документе всегда выделяется бэктиками, бэктики в данном случае не используются.<br>
  Например:
  Модификатор `size` используется, только если блоку установлен модификатор `theme` в значении [islands](#).
* Если необходимо сослаться на документ, кавычки в названии документа опускаются.<br>
  Подробнее об этом можно почитать в статье [Уровни переопределения](#).
* Если есть возможность сослаться косвенно на документ без упоминания его названия, стоит это сделать и не перегружать текст.<br>
  Воспользуемся [командами bem-tools](#) для создания собственных блоков и переопределения существующих.

<a name="anchor-desigh"></a>
### Использование якорей

* Следует избегать установки якорей вручную. Где возможно ссылаться на автоматически сгенеренные якоря к заголовкам. [Правила генерации якорей по заголовкам](#Правила-автоматической-генерации-якорей-по-заголовкам) на bem.info и Github совпадают.
* Якоря содержат только осмысленный текст.
* Записываются только латиницей.
* Не содержат прописных букв.
* Слова в пределах якоря разделяются дефисом.

#### Правила автоматической генерации якорей по заголовкам

Автоматическое построение оглавления: [toc-md](https://github.com/eGavr/toc-md).

* Разделитель слов: дефис `-`.
* Разрешенные символы: `A-Za-zА-Яа-яЁё0-9_\\- `.
* Символы, не входящие в список разрешенных, опускаются.
* Латиница — все буквы переводятся в нижний регистр.
* Кириллица — регистр не изменяется.
* Заголовки с одинаковыми названиями: якорь второго заголовка получает «хвостик» `-1`.
* Заголовки разные, но сгенеренные якоря одинаковые: якорь второго заголовка получает «хвостик» `-1`.

**Пример**

заголовок:
```
## Схема именования CSS-классов
```

якорь:
```
#Схема-именования-css-классов
```

<a name="terms"> </a>
## Оформление терминов, названий

### Обратные кавычки

В обратные кавычки заключаются следующие слова и выражения:

Имена БЭМ-сущностей (названия блоков, элементов, модификаторов), HTML-теги, значения модификаторов, параметров и т.п.

```
`button`
`<a>`
```

### Названия
Поддерживаются две формы написания БЭМ-сущностей:

1) **Короткая**, принятая в БЭМ-методологии, с разделителем с помощью нижнего подчеркивания `block__elem_mod`, например:

<pre>
`button`  `button__text`  `button_size_s`
</pre>

2) **Длинная** в виде полного указания типа БЭМ-сущности, его имени и значения без символа разделителя, например:

<pre>
 Блок `button`   Элемент `text` блока `button`  Модификатор блока кнопки `size` со значением `s`.
</pre>

Рекомендуется придерживаться одного выбранного стиля для документа или блока документов.

Имена БЭМ-сущностей, термины, HTML-теги, значения модификаторов, параметров и т.п. в тексте заключаются в одинарные обратные кавычки.

```
`button`
`<a>`
```

## Оформление и хранение картинок

Все картинки, которые используются в документации хранятся только на [Яндекс.Фотках](https://fotki.yandex.ru/users/bem-info-bem). Желательно создавать отдельные папки по темам (например, `bem-method-docs`).

**Учетная запись**
* Логин: bem-info.bem
* Пароль: pass4bem-info

## Оформление примечаний

Важная информация в тексте (в русской и английской версиях) оформляется одинаково:

* Информация, которую необходимо как-то выделить из основоного текста действительно должна быть важной.
* Важная информация всегда выделяется в новый абзац.
* Перед началом важного текста необходимо добавить **NB**, **Note**, **IMPORTANT** (всегда выделяется жирным и не имеет при себе никаких дополнительных знаков препинания).
* Текст важного сообщения должен содержать логически завершенную мысль. Предложение начинается с прописной буквы и в конце ставится точка.
* Следует избегать идущих подряд нескольких сообщений, выделенных **NB**.
* Важная информация, содержащая в себе пример или состоящая из нескольких абзацев, должна быть отделена от основного текста двумя горизонтальными чертами – до и после сообщения.

### NB, Note, IMPORTANT

Употребление каждого из маркеров выделяемого сообщения зависит от степени важности информации.

* **NB**

Дополнительная инфоомация, на которую следует обратить внимание.

Например:

**NB** Работа с DOM-событиями полностью реализована средствами фреймворка jQuery.

* **Note**

Какая-то важная информация, которая несет в себе позитивный смысл.

Например:

**Note** У нас появились такие-то новые функции.

* **IMPORTANT**

Очень важная информация, без выполнения которой может произойти что-то не очень хорошее :)

Например:

**IMPORTANT** Необходимо указывать одинаковые имена файлов для каждого теста, иначе тест не будет правильным.


### Виды примечаний из образцового документа

<note type="attention">Текст предупреждения.</note>
Внимание! <Важная информация, к которой необходимо привлечь внимание читателя.>
Ограничение

<note type="restriction">Текст ограничения.</note>
Ограничение. <Условия, соблюдение которых обязательно требуется для выполнения каких-либо действий, например: наличие доступа, подготовленные данные. Либо условия, при которых выполнение действия запрещено.>
Примечание

<note>Текст примечания.</note>
<note type="note">Текст примечания.</note>
Примечание. <Дополнительная информация поясняющего характера.>
Совет

<note type="tip">Текст совета.</note>
Совет. <Необязательные, но полезные рекомендации, быстрые способы выполнения чего-либо, горячие клавиши и т. п.>

### Вставка примечания
Информация, на которую следует акцентировать внимание читателя. Примечание должно быть в меру кратким и лаконичным, концентрировать внимание. Примечания обычно следуют после текста параграфа и поясняют его.

Формат вставки примечания:

```
---
  **NB** текст примечания

---
```

Чтобы примечание не отобразилось как заголовок, перед `---` нужно добавить пустую строку.

Для **устаревших** (deprecated) или **нестабильных** (в инкубаторе) блоков нужно в начале документации добавить примечание с информацией о его состоянии и пояснение к нему (при необходимости).


## Обшие требования к оформлению текста

### Заголовки разделов

### Написание и употребление заимствованных слов

Если слово можно перевести (не коряво и без потери смысла) — нужно это делать. Например, благодаря переводу мы говорим и пишем кнопка, а не баттон или button.

Если перевести не получается, то слово можно транслитерировать (записать кириллицей, ориентируясь на написание) или транскрибировать (записать кириллицей, ориентируясь на звучание). Но лучше избегать таких случаев. Так, мы не используем «дефолтное значение», а пишем «значение по умолчанию».

Третий вариант — так и оставить слово на латинице. Это стоит делать только в том случае, если другого варианта найти не удалось (можно указать в скобках — возможно, части аудитории оно будет понятнее). Рекомендуется соблюдать единообразие употребления заимствованного слова в тексте.

Если вы выбрали третий вариант использования заимствованного слова и пишете его на иностранном языке, то надо помнить, что составное существительное с ним будет всегда писаться через дефис.

Например: *CSS-правила*, *JavaScript-функциональность*.

### Заглавные буквы

Пишутся аббревиатуры, технологии реализации, форматы данных и составные слова с ними, например:
CSS, BEMJSON, HTML, DOM, BEMHTML, DOM-узел, CSS-файл, JS-параметр, БЭМ-блок.

### Кавычки
В кавычки нужно заключать слова, которые «употребляются не в своем обычном значении».

Для русского языка всегда нужно использовать кавычки «елочкой», а для английского ”двойные“ английские кавычки.

В комментариях в коде используются одинарные вертикальные кавычки.

### Списки
Элементы списка отделяются точкой с запятой, если начинается с маленькой буквы и точкой — если с заглавной. Ненумерованные элементы списка начинаются с символа `*` или `-`.

### Конец файла
В конце файла добавляется перенос строки (возврат каретки).

## Оформление кода
Отдельный фрагмент кода отделяется сверху и снизу пустыми строками и тремя обратными кавычками.

Для вставки куска кода в таблицу его нужно обернуть следующим образом:

`<pre><code> код </code></pre>`.

Код не должен содержать лишних левых отступов.

Для подсветки кода после кавычек нужно указать необходимую технологию реализации, например: js, html, css.

<pre>
```js
   code
```
</pre>

Код в тексте (in-line) заключается в одинарные обратные кавычки `пример кода`. Аналогично в тексте выделяются `<теги>` и `термины`, имена БЭМ-сущностей.

### Вставка примера
В документацию можно вставить произвольный пример, который на [lego-сайте](http://lego.yandex-team.ru) отобразится в собранном виде. Код вставляется в формате *вставки кода* (см. предыдущий пункт) с указанием технологии bemjson:

<pre>
```bemjson
{
    block: 'имя блока',
    content: ...
}
```
</pre>


## Оформление и вставка таблицы
Для правильного парсинга таблиц на сайтах [bem-info](http://bem.info) и [lego](http://lego.yandex-team.ru), в отличие от Markdown, используется стандартная HTML-разметка: `<table>`, `<tr>`, `<td>`.

По возможности нужно отказываться от использования таблиц. Если такой возможности нет, нужно стараться делать таблицы узкими, чтобы избежать появления неудобного горизонтального скролла (в т.ч. на [bem-info](http://bem.info) и [lego](http://lego.yandex-team.ru)-сайте).

## Оформление команд
Отделяется сверху и снизу от основного текста пустыми строками и тремя обратными кавычками. Пишется с отступом в 4 пробела.

<pre>
```
    $ bem server
```
</pre>

<a name="links-redirection"></a>

## Переопределение ссылок

Ссылки в документации обрабатываются следующим образом:

* **Ссылки на e-mail**, начинающиеся с протокола `mailto:`, оставлены без изменений.
* **Якоря**
Ссылки-якоря на разделы в текущем документе, например `#section2`, будут оставлены без изменений. Якоря в ссылках любого типа сохраняются, т.е. `http://a/b/c/d#anchor` будет `http://e/f/h/#anchor`.

* **Роуты на сайте**
Если ссылка написана как действующий валидный роут на сайте, например `/tools/optimizers/borschik/`, то она будет оставлена без изменений и с сохранением якоря (см. Якоря).

* **Абсолютные ссылки**
Для любой абсолютной ссылки, т.е. ссылки, начинающейся на `//` или `http://` или `https://` будет произведен поиск существующих постов, полный адрес которых в модели совпадает со ссылкой.
Например, в вашем документе вы оставляете ссылку на главную страницу документации борщика:
`https://github.com/bem/borschik/blob/master/docs/index/index.ru.md`.
В текущей модели bem-info документ с таким путем к md-файлу описан и для него создается роут `tools/optimizers/borschik/`
Поэтому, ссылка, указанная выше, превратится в `tools/optimizers/borschik/`.
Если вы укажете полный путь на гитхабе до md-файла, которого нет в модели (на сайте), то он останется без изменений.

* **Относительные ссылки**
Относительные ссылки работают только в пределах одной ветки или тега одного и того же репозитория.
Рассмотрим пример:
Пусть вы работаете с документом `https://github.com/bem/bem-core/blob/v2.0.0/common.docs/bemjson/bemjson.ru.md` и хотите внутри него оставить ссылку на
`https://github.com/bem/bem-core/blob/v2.0.0/common.docs/bemhtml-js-syntax/bemhtml-js-syntax.ru.md`.

  При этом пути к этим файлам описаны в модели и совпадают с приведенными выше ссылками. Как реализовать ссылку с bemjson на bemhtml-js-syntax?

  * Написать абсолютную ссылку `https://github.com/bem/bem-core/blob/v2.0.0/common.docs/bemhtml-js-syntax/bemhtml-js-syntax.ru.md`. Это плохой путь, так как здесь явно указана ветка
или тег (что равносильно указанию версии библиотеки).
  * Написать относительную ссылку вида: `/common.docs/bemhtml-js-syntax/bemhtml-js-syntax.ru.md`.
  * Написать относительную ссылку `../bemhtml-js-syntax/bemhtml-js-syntax.ru.md`.

  Все 3 варианта при сборке данных будут превращены в ссылку `/libs/bem-core/2.0.0/bemhtml/bemhtml-js-syntax/`.
